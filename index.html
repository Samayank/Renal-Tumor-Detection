<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Deep-Learning Framework for Renal Tumor Classification</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* css/style.css - zero-build, Tailwind CDN present */
        /* Base */
        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Inter', ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
            background: linear-gradient(135deg, #f8fafc 0%, #e0f2fe 25%, #e8eaf6 50%, #f3e5f5 75%, #f8fafc 100%);
            background-attachment: fixed;
        }

        /* Navigation */
        .nav-link {
            padding: 0.5rem 1rem;
            border-radius: 0.75rem;
            font-weight: 500;
            color: #4b5563;
            /* gray-600 */
            transition: all 400ms cubic-bezier(0.4, 0, 0.2, 1);
            backdrop-filter: blur(8px);
        }

        .nav-link:hover {
            background: linear-gradient(135deg, #dbeafe 0%, #e0e7ff 100%);
            color: #1d4ed8;
            /* blue-700 */
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
        }

        .nav-link.active {
            background: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%);
            color: #ffffff;
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(37, 99, 235, 0.4);
        }

        .nav-link-mobile {
            display: block;
            width: 100%;
            text-align: left;
            padding: 0.75rem 1.25rem;
            font-weight: 500;
            color: #374151;
            /* gray-700 */
            transition: background-color 200ms ease;
        }

        .nav-link-mobile:hover {
            background: #dbeafe;
            /* blue-100 */
            color: #1d4ed8;
        }

        /* Page structure */
        .page-section {
            animation: fadeIn 0.5s ease-out;
        }

        .section-title {
            font-size: clamp(1.875rem, 2vw + 1rem, 3rem);
            /* ~text-4xl to 5xl */
            font-weight: 800;
            background: linear-gradient(135deg, #1e293b 0%, #3b82f6 50%, #6366f1 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-align: center;
            margin-bottom: 1rem;
            letter-spacing: -0.02em;
        }

        .subsection-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: #1f2937;
            /* gray-800 */
            margin-bottom: 1rem;
        }

        /* Optimized Cards - Hardware accelerated */
        .card {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(248, 250, 252, 0.95) 100%);
            backdrop-filter: blur(8px);
            /* Reduced blur for better performance */
            padding: 1.5rem;
            border-radius: 1rem;
            border: 1px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.06), 0 1px 4px rgba(0, 0, 0, 0.04);
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1), box-shadow 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
            transform: translateZ(0);
            /* Force hardware acceleration */
        }

        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, transparent, #3b82f6, #6366f1, transparent);
            transform: translateX(-100%);
            transition: transform 600ms ease;
        }

        .card:hover::before {
            transform: translateX(0);
        }

        .card:hover {
            transform: translateY(-4px) scale(1.02);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.12), 0 8px 16px rgba(0, 0, 0, 0.08);
            border-color: rgba(59, 130, 246, 0.2);
        }

        /* Interactive Framework Diagram */
        .hotspot-btn {
            position: absolute;
            width: 1.25rem;
            /* 20px */
            height: 1.25rem;
            background: linear-gradient(135deg, #3b82f6 0%, #6366f1 100%);
            border-radius: 9999px;
            cursor: pointer;
            transition: all 400ms cubic-bezier(0.34, 1.56, 0.64, 1);
            box-shadow: 0 0 0 6px rgba(59, 130, 246, 0.35);
            /* ring */
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }

        .hotspot-btn:hover {
            background: linear-gradient(135deg, #60a5fa 0%, #8b5cf6 100%);
            transform: scale(1.2) rotate(360deg);
            box-shadow: 0 0 0 10px rgba(59, 130, 246, 0.5);
        }

        @keyframes pulse {

            0%,
            100% {
                box-shadow: 0 0 0 6px rgba(59, 130, 246, 0.35);
            }

            50% {
                box-shadow: 0 0 0 10px rgba(59, 130, 246, 0.2);
            }
        }

        /* FAQ Accordion */
        .faq-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
            padding: 1rem;
            font-weight: 600;
            text-align: left;
            color: #374151;
            /* gray-700 */
            background: #f3f4f6;
            /* gray-100 */
            border: 0;
            cursor: pointer;
        }

        .faq-header:hover {
            background: #e5e7eb;
        }

        .faq-content {
            padding: 1rem;
            background: #ffffff;
            border: 1px solid #f3f4f6;
            border-top: 0;
            border-bottom-left-radius: 0.5rem;
            border-bottom-right-radius: 0.5rem;
            overflow: hidden;
            transition: max-height 500ms ease-in-out, padding 300ms ease;
        }

        /* Chatbot */
        .chatbot-fab {
            position: fixed;
            bottom: 1.5rem;
            right: 1.5rem;
            width: 4rem;
            height: 4rem;
            background: linear-gradient(135deg, #2563eb 0%, #4f46e5 100%);
            border-radius: 9999px;
            box-shadow: 0 8px 32px rgba(37, 99, 235, 0.4), 0 2px 8px rgba(0, 0, 0, 0.1);
            color: #fff;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 400ms cubic-bezier(0.34, 1.56, 0.64, 1);
            z-index: 50;
            backdrop-filter: blur(8px);
        }

        .chatbot-fab:hover {
            transform: scale(1.1) rotate(10deg);
            background: linear-gradient(135deg, #1d4ed8 0%, #4338ca 100%);
            box-shadow: 0 12px 40px rgba(37, 99, 235, 0.6), 0 4px 12px rgba(0, 0, 0, 0.15);
        }

        .chatbot-window {
            position: fixed;
            bottom: 6rem;
            right: 1.5rem;
            width: 20rem;
            /* 320px */
            height: 28rem;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(248, 250, 252, 0.95) 100%);
            backdrop-filter: blur(20px);
            border-radius: 1rem;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15), 0 8px 16px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.3);
            display: flex;
            flex-direction: column;
            z-index: 50;
            transition: all 500ms cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .chat-message {
            padding: 0.75rem 1rem;
            margin: 0.5rem 0;
            border-radius: 0.75rem;
            max-width: 18rem;
            backdrop-filter: blur(8px);
            transition: all 300ms ease;
        }

        .chat-user {
            background: linear-gradient(135deg, #2563eb 0%, #4f46e5 100%);
            color: #fff;
            margin-left: auto;
            box-shadow: 0 4px 12px rgba(37, 99, 235, 0.3);
        }

        .chat-bot {
            background: linear-gradient(135deg, rgba(229, 231, 235, 0.8) 0%, rgba(243, 244, 246, 0.8) 100%);
            color: #1f2937;
            margin-right: auto;
            border: 1px solid rgba(255, 255, 255, 0.5);
        }

        /* New style for typing indicator */
        .chat-bot.typing {
            color: #555;
            font-style: italic;
            animation: typing-pulse 1.5s infinite;
        }

        @keyframes typing-pulse {

            0%,
            100% {
                opacity: 0.5;
            }

            50% {
                opacity: 1;
            }
        }

        /* Optimized on-scroll animation - faster and smoother */
        .animate-on-scroll {
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.6s ease-out, transform 0.6s ease-out;
            will-change: opacity, transform;
            /* Hint browser for optimization */
        }

        .animate-on-scroll.is-visible {
            opacity: 1;
            transform: translateY(0);
        }

        /* Additional fluid animations */
        @keyframes float {

            0%,
            100% {
                transform: translateY(0px);
            }

            50% {
                transform: translateY(-10px);
            }
        }

        @keyframes shimmer {
            0% {
                background-position: -200% 0;
            }

            100% {
                background-position: 200% 0;
            }
        }

        @keyframes glow {

            0%,
            100% {
                box-shadow: 0 0 20px rgba(59, 130, 246, 0.3);
            }

            50% {
                box-shadow: 0 0 30px rgba(59, 130, 246, 0.6), 0 0 40px rgba(59, 130, 246, 0.4);
            }
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slideInLeft {
            from {
                opacity: 0;
                transform: translateX(-50px);
            }

            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes slideInRight {
            from {
                opacity: 0;
                transform: translateX(50px);
            }

            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes particles {
            0% {
                transform: translateY(100vh) rotate(0deg);
                opacity: 1;
            }

            100% {
                transform: translateY(-100vh) rotate(360deg);
                opacity: 0;
            }
        }

        @keyframes pulse-gentle {

            0%,
            100% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.05);
            }
        }

        @keyframes slideInFromLeft {
            from {
                transform: translateX(-100%);
                opacity: 0;
            }

            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @keyframes slideInFromRight {
            from {
                transform: translateX(100%);
                opacity: 0;
            }

            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        /* Floating elements */
        .floating {
            animation: float 6s ease-in-out infinite;
        }

        /* Shimmer effect for special elements */
        .shimmer {
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
            background-size: 200% 100%;
            animation: shimmer 3s infinite;
        }

        /* Glow effect */
        .glow {
            animation: glow 3s ease-in-out infinite;
        }

        /* Gentle pulse */
        .pulse-gentle {
            animation: pulse-gentle 4s ease-in-out infinite;
        }

        /* Particle effect container */
        .particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }

        .particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: linear-gradient(45deg, #3b82f6, #6366f1);
            border-radius: 50%;
            animation: particles 10s linear infinite;
        }

        /* Parallax effect */
        .parallax {
            transform: translateZ(0);
            will-change: transform;
        }

        /* Loading shimmer for images */
        .image-loading {
            background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
            background-size: 200% 100%;
            animation: shimmer 1.5s infinite;
        }

        /* Hover glow for interactive elements */
        .interactive-glow {
            transition: all 300ms ease;
        }

        .interactive-glow:hover {
            box-shadow: 0 0 30px rgba(59, 130, 246, 0.4), 0 0 60px rgba(59, 130, 246, 0.2);
            transform: translateY(-2px);
        }

        /* Section-specific styling */
        .page-section {
            position: relative;
            padding: 4rem 0;
        }

        .page-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 1px;
            height: 100%;
            background: linear-gradient(to bottom, transparent, rgba(59, 130, 246, 0.1), transparent);
            z-index: -1;
        }

        /* Creative section backgrounds */
        #page-home {
            background: linear-gradient(135deg,
                    rgba(248, 250, 252, 0.8) 0%,
                    rgba(241, 245, 249, 0.8) 25%,
                    rgba(235, 242, 250, 0.8) 50%,
                    rgba(248, 250, 252, 0.8) 100%);
        }

        #page-problem {
            background: linear-gradient(135deg,
                    rgba(254, 249, 195, 0.3) 0%,
                    rgba(254, 240, 138, 0.2) 50%,
                    rgba(254, 249, 195, 0.3) 100%);
        }

        #page-framework {
            background: linear-gradient(135deg,
                    rgba(238, 242, 255, 0.4) 0%,
                    rgba(219, 234, 254, 0.3) 50%,
                    rgba(238, 242, 255, 0.4) 100%);
        }

        #page-demo {
            background: linear-gradient(135deg,
                    rgba(249, 250, 251, 0.5) 0%,
                    rgba(243, 244, 246, 0.4) 50%,
                    rgba(249, 250, 251, 0.5) 100%);
        }

        #page-analysis {
            background: linear-gradient(135deg,
                    rgba(248, 250, 252, 0.4) 0%,
                    rgba(241, 245, 249, 0.3) 50%,
                    rgba(248, 250, 252, 0.4) 100%);
        }

        #page-faq {
            background: linear-gradient(135deg,
                    rgba(250, 245, 255, 0.3) 0%,
                    rgba(245, 243, 255, 0.2) 50%,
                    rgba(250, 245, 255, 0.3) 100%);
        }

        /* Header scroll effects */
        header {
            transition: transform 0.3s ease-in-out;
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        }

        /* Enhanced navigation active state */
        .nav-link.active {
            position: relative;
        }

        .nav-link.active::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 50%;
            transform: translateX(-50%);
            width: 20px;
            height: 2px;
            background: linear-gradient(90deg, #3b82f6, #6366f1);
            border-radius: 1px;
            animation: slideInLeft 0.3s ease-out;
        }

        /* Creative spacing utilities */
        .section-spacer {
            height: 8rem;
            background: linear-gradient(135deg, transparent 0%, rgba(59, 130, 246, 0.05) 50%, transparent 100%);
        }

        /* Optimized card hover effects - smoother and less intensive */
        .card:hover {
            transform: translateY(-4px) scale(1.01);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.12), 0 5px 15px rgba(0, 0, 0, 0.08);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* Simple page fade-in */
        @keyframes fadeIn {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }

        .animate-fadeIn {
            animation: fadeIn 0.5s ease-out;
        }
    </style>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
</head>

<body class="bg-gradient-to-br from-slate-50 via-blue-50/30 to-indigo-50/20 font-sans text-gray-800 antialiased">
    <div class="particles" id="particles"></div>
    <header class="sticky top-0 z-50 bg-white/90 backdrop-blur-md shadow-lg border-b border-white/20">
        <nav class="max-w-7xl mx-auto flex justify-between items-center p-4" aria-label="Primary">
            <h1 class="text-2xl font-bold text-blue-700">Renal Tumor Classification</h1>

            <div class="hidden md:flex items-center gap-2">
                <button class="nav-link active" data-page="home">Home</button>
                <button class="nav-link" data-page="problem">The Problem</button>
                <button class="nav-link" data-page="framework">Our Framework</button>
                <button class="nav-link" data-page="demo">Interactive Demo</button>
                <button class="nav-link" data-page="analysis">Analysis</button>
                <button class="nav-link" data-page="faq">FAQs & Facts</button>
            </div>

            <button id="mobile-menu-btn"
                class="md:hidden inline-flex items-center justify-center rounded-md p-2 text-gray-600 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-600"
                aria-controls="mobile-menu" aria-expanded="false" aria-label="Open navigation menu">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h16" />
                </svg>
            </button>
        </nav>

        <div id="mobile-menu" class="md:hidden hidden border-t border-gray-200">
            <div class="max-w-7xl mx-auto p-2 space-y-1">
                <button class="nav-link-mobile" data-page="home">Home</button>
                <button class="nav-link-mobile" data-page="problem">The Problem</button>
                <button class="nav-link-mobile" data-page="framework">Our Framework</button>
                <button class="nav-link-mobile" data-page="demo">Interactive Demo</button>
                <button class="nav-link-mobile" data-page="analysis">Analysis</button>
                <button class="nav-link-mobile" data-page="faq">FAQs & Facts</button>
            </div>
        </div>
    </header>

    <main class="max-w-6xl mx-auto p-4 md:p-8">

        <section id="page-home" class="page-section space-y-12 min-h-screen flex flex-col justify-center relative">
            <div class="text-center py-12 md:py-16">
                <h2 class="section-title floating">Deep-Learning Framework for Renal Tumor Detection and Subtype
                    Classification
                </h2>
                <p class="text-xl text-gray-600">A project by Sarthak Vishal Luhadia, Daksh Singla, and Samayank Goel
                </p>
                <p class="text-lg text-gray-500">Guided by Dr. Logeswari G</p>
            </div>

            <div
                class="grid md:grid-cols-1 gap-6 items-center bg-gradient-to-r from-white via-blue-50/50 to-indigo-50/30 p-6 rounded-xl shadow-lg border border-white/50 animate-on-scroll backdrop-blur-sm">
                <div>
                    <h3 class="subsection-title text-blue-700">Introduction</h3>
                    <p class="mb-4 text-lg leading-relaxed">The diagnosis of Renal Cell Carcinoma (RCC) often depends on
                        CT scans and invasive biopsies—procedures that can be time-consuming, risky, and sometimes
                        inconclusive.</p>
                    <p class="mb-4 text-lg leading-relaxed">Many AI models rely exclusively on CT data, struggle to
                        generalize across centers, and act like black boxes—making clinical validation harder.</p>
                    <p class="text-lg leading-relaxed">Our method utilizes a deep learning framework focused on CT imaging. By incorporating explainable AI (XAI), this framework improves the model's accuracy, robustness, and clinical reliability.</p>

                    </div>
                </div>

            <div class="absolute bottom-8 left-1/2 transform -translate-x-1/2 animate-bounce">
                <svg class="w-6 h-6 text-blue-400" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd"
                        d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"
                        clip-rule="evenodd" />
                </svg>
            </div>
        </section>

        <div class="section-spacer"></div>

        <section id="page-problem" class="page-section space-y-12 min-h-screen flex flex-col justify-center py-16">
            <div class="absolute inset-0 overflow-hidden pointer-events-none">
                <div class="absolute top-20 left-10 w-32 h-32 bg-yellow-200/20 rounded-full blur-xl animate-pulse">
                </div>
                <div class="absolute bottom-20 right-10 w-40 h-40 bg-orange-200/20 rounded-full blur-xl animate-pulse"
                    style="animation-delay: 2s"></div>
            </div>
            <h2 class="section-title relative z-10">The Problem We Solve</h2>
            <p class="text-xl text-center text-gray-600 max-w-4xl mx-auto leading-relaxed">Current AI for RCC faces four
                persistent challenges that our framework addresses directly, revolutionizing kidney cancer diagnosis.
            </p>

            <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-4">
                <div class="card animate-on-scroll group">
                    <div class="flex items-center mb-3">
                        <div
                            class="w-8 h-8 bg-red-100 rounded-full flex items-center justify-center mr-3 group-hover:bg-red-200 transition-colors">
                            <span class="text-red-600 font-bold">1</span>
                        </div>
                        <h4 class="font-semibold text-lg">Manual Effort</h4>
                    </div>
                    <p class="text-gray-600 leading-relaxed">Most methods require laborious, inconsistent manual
                        outlining of tumor regions by radiologists, taking 30-60 minutes per case.</p>
                    <div class="mt-3 text-sm font-medium text-red-600">Our solution: Automated ROI detection</div>
                </div>
                <div class="card animate-on-scroll group">
                    <div class="flex items-center mb-3">
                        <div
                            class="w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center mr-3 group-hover:bg-purple-200 transition-colors">
                            <span class="text-purple-600 font-bold">2</span>
                        </div>
                        <h4 class="font-semibold text-lg">"Black Box" Models</h4>
                    </div>
                    <p class="text-gray-600 leading-relaxed">Opaque AI decisions prevent clinical trust and regulatory
                        approval, creating barriers to real-world adoption.</p>
                    <div class="mt-3 text-sm font-medium text-purple-600">Our solution: Explainable AI heatmaps</div>
                </div>
                <div class="card animate-on-scroll group">
                    <div class="flex items-center mb-3">
                        <div
                            class="w-8 h-8 bg-green-100 rounded-full flex items-center justify-center mr-3 group-hover:bg-green-200 transition-colors">
                            <span class="text-green-600 font-bold">3</span>
                        </div>
                        <h4 class="font-semibold text-lg">Poor Reproducibility</h4>
                    </div>
                    <p class="text-gray-600 leading-relaxed">Single-center datasets prevent external validation,
                        limiting clinical applicability.</p>
                    <div class="mt-3 text-sm font-medium text-green-600">Our solution: Public datasets (KiTS, TCGA)
                    </div>
                </div>
            </div>

            <div class="mt-8 bg-white rounded-xl border border-gray-200 shadow-lg overflow-hidden animate-on-scroll">
                <div class="grid grid-cols-2 divide-x divide-gray-200">
                    <div class="p-4 bg-red-50">
                        <h4 class="font-bold text-red-700 flex items-center text-lg">
                            <svg class="w-5 h-5 mr-2 shrink-0" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd"
                                    d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z"
                                    clip-rule="evenodd" />
                            </svg>
                            Current Approaches
                        </h4>
                    </div>
                    <div class="p-4 bg-green-50">
                        <h4 class="font-bold text-green-700 flex items-center text-lg">
                            <svg class="w-5 h-5 mr-2 shrink-0" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd"
                                    d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"
                                    clip-rule="evenodd" />
                            </svg>
                            Our Framework
                        </h4>
                    </div>

                    <div class="p-4 text-red-700 border-t border-gray-200">
                        <div class="flex items-start">
                            <span class="w-2 h-2 bg-red-500 rounded-full mr-3 mt-2 shrink-0"></span>
                            <span>30-60 min manual segmentation</span>
                        </div>
                    </div>
                    <div class="p-4 text-green-700 border-t border-gray-200">
                        <div class="flex items-start">
                            <span class="w-2 h-2 bg-green-500 rounded-full mr-3 mt-2 shrink-0"></span>
                            <span>Automated 2-minute analysis</span>
                        </div>
                    </div>

                    <div class="p-4 text-red-700 border-t border-gray-200">
                        <div class="flex items-start">
                            <span class="w-2 h-2 bg-red-500 rounded-full mr-3 mt-2 shrink-0"></span>
                            <span>Unexplained AI decisions</span>
                        </div>
                    </div>
                    <div class="p-4 text-green-700 border-t border-gray-200">
                        <div class="flex items-start">
                            <span class="w-2 h-2 bg-green-500 rounded-full mr-3 mt-2 shrink-0"></span>
                            <span>Visual AI explanations</span>
                        </div>
                    </div>

                    <div class="p-4 text-red-700 border-t border-gray-200">
                        <div class="flex items-start">
                            <span class="w-2 h-2 bg-red-500 rounded-full mr-3 mt-2 shrink-0"></span>
                            <span>CT-only, limited accuracy</span>
                        </div>
                    </div>
                    <div class="p-4 text-green-700 border-t border-gray-200">
                        <div class="flex items-start">
                            <span class="w-2 h-2 bg-green-500 rounded-full mr-3 mt-2 shrink-0"></span>
                            <span>Multi-modal accuracy boost</span>
                        </div>
                    </div>

                    <div class="p-4 text-red-700 border-t border-gray-200">
                        <div class="flex items-start">
                            <span class="w-2 h-2 bg-red-500 rounded-full mr-3 mt-2 shrink-0"></span>
                            <span>Single-center bias</span>
                        </div>
                    </div>
                    <div class="p-4 text-green-700 border-t border-gray-200">
                        <div class="flex items-start">
                            <span class="w-2 h-2 bg-green-500 rounded-full mr-3 mt-2 shrink-0"></span>
                            <span>Cross-validated results</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <div class="section-spacer"></div>

        <section id="page-demo" class="page-section space-y-12 min-h-screen flex flex-col justify-center py-16">
            <h2 class="section-title">Interactive Case Demo</h2>
            <p class="text-xl text-center text-gray-600 max-w-3xl mx-auto leading-relaxed">Experience our AI framework
                in action. Select from 8 real kidney CT cases to see automated detection and segmentation.
            </p>

            <div class="bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-lg p-4 mb-6">
                <div class="flex items-start space-x-3">
                    <svg class="w-6 h-6 text-blue-600 mt-0.5" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd"
                            d="M18 10a8 8 0 11-16 0 8 8 0 000 16zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z"
                            clip-rule="evenodd" />
                    </svg>
                    <div>
                        <h4 class="font-semibold text-blue-900 mb-1">How to Use This Demo</h4>
                        <p class="text-blue-800 text-sm">Click on any case below to see the AI analysis. The left shows
                            the original CT scan (MP4), the right shows AI-detected tumors and kidneys (GIF).
                        </p>
                    </div>
                </div>
            </div>

            <div id="case-selector" class="flex flex-wrap justify-center gap-3 mb-8"></div>

            <div class="grid md:grid-cols-2 gap-6 items-start">
                <div class="animate-on-scroll">
                    <h3 class="text-2xl font-semibold text-center mb-4">Input: Original CT Scan (MP4)</h3>
                    <div class="relative">
                        <video id="input-mp4" src="" alt="Original CT Scan"
                            class="rounded-lg shadow-xl w-full border-4 border-gray-200" autoplay muted loop
                            playsinline style="filter: grayscale(100%);"></video>
                        <div
                            class="absolute top-2 left-2 bg-black/70 text-white px-3 py-1 rounded-full text-sm font-medium">
                            Raw CT Data
                        </div>
                    </div>
                </div>
                <div class="animate-on-scroll">
                    <h3 class="text-2xl font-semibold text-center mb-4">Output: AI Analysis Results (GIF)</h3>
                    <div class="relative">
                        <img id="output-gif" src="" alt="AI Segmentation"
                            class="rounded-lg shadow-xl w-full border-4 border-gray-200">
                        <div
                            class="absolute top-2 right-2 bg-green-600 text-white px-3 py-1 rounded-full text-sm font-medium">
                            AI Processed
                        </div>
                    </div>
                    <div class="mt-4 p-4 bg-white rounded-lg text-center space-x-6 shadow-lg border border-gray-100">
                        <span class="font-medium text-lg"><span style="color: #3b82f6;">■</span> Tumor</span>
                        <span class="font-medium text-lg"><span style="color:#ef4444;">■</span> Kidney</span>
                    </div>
                </div>
            </div>

            </section>

        <div class="section-spacer"></div>

        <section id="page-analysis" class="page-section space-y-12 min-h-screen flex flex-col justify-center py-16">
            <div class="w-full max-w-6xl mx-auto px-4">
                <h2 class="section-title">Research Objectives</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 items-stretch justify-items-center max-w-5xl mx-auto">
                    <div class="card animate-on-scroll flex flex-col h-full w-full">
                        <h4 class="font-semibold text-lg mb-2">Clinical Impact</h4>
                        <p class="flex-grow text-gray-600 leading-relaxed">Reduce time-to-diagnosis and minimize
                            invasive procedures with reliable automation.</p>
                    </div>
                    <div class="card animate-on-scroll flex flex-col h-full w-full">
                        <h4 class="font-semibold text-lg mb-2">Accurate Segmentation</h4>
                        <p class="flex-grow text-gray-600 leading-relaxed">Deliver precise 3D delineations of kidneys
                            and tumors for planning.</p>
                    </div>
                    <div class="card animate-on-scroll flex flex-col h-full w-full">
                        <h4 class="font-semibold text-lg mb-2">Reproducibility</h4>
                        <p class="flex-grow text-gray-600 leading-relaxed">Leverage public datasets and clear protocols
                            for repeatable results.</p>
                    </div>
                    <div class="card animate-on-scroll flex flex-col h-full w-full">
                        <h4 class="font-semibold text-lg mb-2">Explainability</h4>
                        <p class="flex-grow text-gray-600 leading-relaxed">Provide visual and feature‑level insights
                            (e.g., Grad‑CAM) to build trust.</p>
                    </div>
                </div>
            </div>

            <div class="grid md:grid-cols-2 gap-8 mt-12">
                <div class="animate-on-scroll">
                    <h3 class="subsection-title">Limitations</h3>
                    <ul class="list-disc list-inside space-y-2 text-gray-700">
                        <li>Dataset scarcity and site bias can limit generalization.</li>
                        <li>Small, ambiguous tumors are challenging to detect and segment.</li>
                        <li>Training 3D models and fusion pipelines is computationally heavy.</li>
                        <li>Prospective clinical validation remains essential.</li>
                    </ul>
                </div>
                <div class="animate-on-scroll">
                    <h3 class="subsection-title">Future Work</h3>
                    <ul class="list-disc list-inside space-y-2 text-gray-700">
                        <li>Integrate multi‑center cohorts and harmonize acquisition protocols.</li>
                        <li>Explore architecture optimizations and distillation for efficiency.</li>
                        <li>Refine segmentation with better priors and uncertainty modeling.</li>
                        <li>Deeper fusion strategies and clinician‑first tooling.</li>
                    </ul>
                </div>
            </div>
        </section>

        <div class="section-spacer"></div>

        <section id="page-faq" class="page-section space-y-12 min-h-screen flex flex-col justify-center py-16">
            <div class="absolute inset-0 overflow-hidden pointer-events-none">
                <div class="absolute top-16 left-16 w-28 h-28 bg-purple-200/20 rounded-full blur-xl animate-pulse">
                </div>
                <div class="absolute bottom-16 right-16 w-32 h-32 bg-pink-200/20 rounded-full blur-xl animate-pulse"
                    style="animation-delay: 2.5s"></div>
                <div class="absolute top-1/3 right-1/4 w-20 h-20 bg-violet-200/20 rounded-full blur-xl animate-pulse"
                    style="animation-delay: 1s"></div>
            </div>
            <h2 class="section-title relative z-10">FAQs & Kidney Cancer Facts</h2>

            <div class="grid lg:grid-cols-3 gap-8">
                <div class="lg:col-span-2 space-y-4 animate-on-scroll">
                    <div class="bg-white rounded-lg shadow-md overflow-hidden">
                        <button class="faq-header" aria-expanded="false">
                            <span>What is the main goal of this project?</span>
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 transition-transform"
                                viewBox="0 0 20 20" fill="currentColor">
                                <path
                                    d="M5.23 7.21a.75.75 0 011.06.02L10 11.17l3.71-3.94a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z" />
                            </svg>
                        </button>
                        <div class="faq-content" style="max-height:0" hidden>
                            <p>To build an automated, trustworthy AI pipeline for kidney tumor detection, segmentation,
                                and subtype classification—supporting faster, safer decisions.</p>
                        </div>
                    </div>
                    <div class="bg-white rounded-lg shadow-md overflow-hidden">
                        <button class="faq-header" aria-expanded="false">
                            <span>What is Explainable AI (XAI)?</span>
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 transition-transform"
                                viewBox="0 0 20 20" fill="currentColor">
                                <path
                                    d="M5.23 7.21a.75.75 0 011.06.02L10 11.17l3.71-3.94a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z" />
                            </svg>
                        </button>
                        <div class="faq-content" style="max-height:0" hidden>
                            <p>XAI tools like Grad‑CAM and SHAP make model behavior transparent by indicating which
                                regions or features drove each decision.</p>
                        </div>
                    </div>
                    <div class="bg-white rounded-lg shadow-md overflow-hidden">
                        <button class="faq-header" aria-expanded="false">
                            <span>Is this tool ready for hospitals?</span>
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 transition-transform"
                                viewBox="0 0 20 20" fill="currentColor">
                                <path
                                    d="M5.23 7.21a.75.75 0 011.06.02L10 11.17l3.71-3.94a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z" />
                            </svg>
                        </button>
                        <div class="faq-content" style="max-height:0" hidden>
                            <p>Not yet. It’s a research framework focused on reliability and explainability, providing a
                                strong foundation for clinical translation.</p>
                        </div>
                    </div>
                </div>

                <div class="lg:col-span-1 animate-on-scroll">
                    <div
                        class="bg-gradient-to-br from-blue-100 via-indigo-50 to-purple-50/80 p-6 rounded-xl shadow-xl border border-blue-200/50 text-blue-900 backdrop-blur-sm">
                        <h3 class="subsection-title">Did You Know?</h3>
                        <ul class="list-disc list-inside space-y-2">
                            <li>Renal Cell Carcinoma (RCC) is the most common kidney cancer.</li>
                            <li>Early detection can significantly improve outcomes.</li>
                            <li>Not all renal tumors are malignant; many are benign.</li>
                            <li>This project uses public datasets (e.g., KiTS and TCGA) to promote reproducibility.</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <div class="section-spacer"></div>

        <button class="chatbot-fab glow" aria-label="Open project assistant">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-7 w-7" viewBox="0 0 24 24" fill="currentColor">
                <path
                    d="M12 3C6.477 3 2 6.686 2 11c0 2.02.93 3.86 2.463 5.246-.144.873-.51 2.192-1.383 3.601a.5.5 0 00.628.716c2.07-.654 3.456-1.448 4.3-2.01A11.83 11.83 0 0012 19c5.523 0 10-3.686 10-8s-4.477-8-10-8z" />
            </svg>
        </button>

        <div id="chatbot-window" class="chatbot-window hidden" role="dialog" aria-labelledby="chatbot-title"
            aria-modal="true">
            <div class="flex items-center justify-between px-4 py-3 border-b bg-gray-50">
                <h3 id="chatbot-title" class="font-semibold">Project Assistant</h3>
                <button class="close-btn text-gray-600 hover:text-gray-900" aria-label="Close chat">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                    </svg>
                </button>
            </div>
            <div id="chatbot-messages" class="flex-1 overflow-y-auto p-4 bg-white"></div>
            <div class="p-3 border-t bg-white">
                <label for="chatbot-input" class="sr-only">Type your message</label>
                <div class="flex gap-2">
                    <input id="chatbot-input" type="text"
                        class="flex-1 rounded-md border border-gray-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-600"
                        placeholder="Ask about the project..." autocomplete="off">
                    <button class="send-btn bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 disabled:opacity-50" disabled>Send</button>
                </div>
            </div>
        </div>

        <footer class="bg-gradient-to-r from-gray-50 via-blue-50/30 to-indigo-50/30 mt-16 border-t border-gray-200/50">
            <div class="max-w-6xl mx-auto p-8">
                <div class="grid md:grid-cols-3 gap-8 mb-8">
                    <div class="text-center md:text-left">
                        <h3 class="font-bold text-gray-800 mb-3">Renal Tumor AI Framework</h3>
                        <p class="text-gray-600 text-sm leading-relaxed">
                            A cutting-edge deep learning solution for automated kidney tumor detection, segmentation,
                            and classification using multi-modal data fusion.
                        </p>
                    </div>

                    <div class="text-center">
                        <h3 class="font-bold text-gray-800 mb-3">Quick Links</h3>
                        <div class="space-y-2">
                            <button onclick="scrollToSection('home')"
                                class="block text-gray-600 hover:text-blue-600 text-sm transition-colors">Home</button>
                            <button onclick="scrollToSection('framework')"
                                class="block text-gray-600 hover:text-blue-600 text-sm transition-colors">Our
                                Framework</button>
                            <button onclick="scrollToSection('demo')"
                                class="block text-gray-600 hover:text-blue-600 text-sm transition-colors">Interactive
                                Demo</button>
                            <button onclick="scrollToSection('analysis')"
                                class="block text-gray-600 hover:text-blue-600 text-sm transition-colors">Analysis</button>
                        </div>
                    </div>

                    <div class="text-center md:text-right">
                        <h3 class="font-bold text-gray-800 mb-3">Team & Supervision</h3>
                        <div class="space-y-1 text-sm text-gray-600">
                            <p><strong>Students:</strong></p>
                            <p>Sarthak Vishal Luhadia</p>
                            <p>Daksh Singla</p>
                            <p>Samayank Goel</p>
                            <p class="mt-2"><strong>Supervisor:</strong></p>
                            <p>Dr. Logeswari G.</p>
                        </div>
                    </div>
                </div>

                <div class="border-t border-gray-200/50 pt-6 text-center">
                    <p class="text-gray-500 text-sm">
                        © 2025 Renal Tumor Classification Project. Built with modern web technologies and AI innovation.
                    </p>
                    <div class="flex justify-center space-x-4 mt-3">
                        <span class="text-xs bg-blue-100 text-blue-600 px-2 py-1 rounded-full">Deep Learning</span>
                        <span class="text-xs bg-purple-100 text-purple-600 px-2 py-1 rounded-full">Medical AI</span>
                        <span class="text-xs bg-green-100 text-green-600 px-2 py-1 rounded-full">Explainable AI</span>
                        <span class="text-xs bg-orange-100 text-orange-600 px-2 py-1 rounded-full">Multi-modal</span>
                    </div>
                </div>
            </div>
        </footer>

    </main>

    <script defer>
        // js/main.js

        document.addEventListener('DOMContentLoaded', () => {
            // --- Page Navigation Logic ---
            const allNavLinks = document.querySelectorAll('.nav-link, .nav-link-mobile');
            const pages = document.querySelectorAll('.page-section');
            const mobileMenu = document.getElementById('mobile-menu');
            const mobileMenuBtn = document.getElementById('mobile-menu-btn');

            function scrollToSection(pageId) {
                const targetElement = document.getElementById(`page-${pageId}`);
                if (targetElement) {
                    const offset = 80; // Account for sticky header
                    const elementPosition = targetElement.offsetTop;
                    const offsetPosition = elementPosition - offset;

                    window.scrollTo({
                        top: offsetPosition,
                        behavior: 'smooth'
                    });
                }

                allNavLinks.forEach(link => {
                    link.classList.toggle('active', link.dataset.page === pageId);
                });
                mobileMenu?.classList.add('hidden');
            }

            allNavLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    scrollToSection(link.dataset.page);
                });
            });

            mobileMenuBtn?.addEventListener('click', () => {
                mobileMenu.classList.toggle('hidden');
            });

            // --- Interactive Framework Diagram Logic ---
            const frameworkData = {
                ct: {
                    title: 'Input: Raw CT Scan',
                    text: 'The process begins with a standard 3D CT scan, providing detailed cross‑sectional views of the kidneys.'
                },
                yolo: {
                    title: 'YOLOv10s (Detection)',
                    text: 'A fast object detector automatically localizes kidneys and crops the Region of Interest (ROI) to reduce search space.'
                },
                unet: {
                    title: '3D U‑Net (Segmentation)',
                    text: 'A 3D U‑Net labels every voxel as kidney, tumor, producing a precise volumetric segmentation.'
                },
                radiomics: {
                    title: 'Radiomic Feature Extraction',
                    text: 'From the segmented tumor, engineered texture, shape, and intensity features (radiomics) are extracted.'
                },
                fusion: {
                    title: 'Feature Fusion (Random Forest)',
                    text: 'Radiomic and genomic features are concatenated and fed to a Random Forest to predict the tumor subtype.'
                },
                xai: {
                    title: 'Explainable AI (Grad‑CAM)',
                    text: 'Grad‑CAM heatmaps highlight which image regions influenced the final decision, improving interpretability.'
                }
            };

            document.querySelectorAll('.hotspot-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    const target = btn.dataset.target;
                    const data = frameworkData[target];
                    if (data) {
                        document.getElementById('framework-title').textContent = data.title;
                        document.getElementById('framework-text').textContent = data.text;
                    }
                });
            });

            // --- Case Demo Logic ---
            // ===================================================================
            // === IMPORTANT: THIS IS WHERE YOU ADD YOUR FILE PATHS ===
            // ===================================================================
            //
            // Replace the 'mp4' and 'gif' placeholder paths with paths to your actual files.
            // For example: 'videos/case1.mp4' or 'https://your-url.com/case1.gif'
            //
            const caseData = [
                { name: 'Case 1', mp4: 'SlicerCapture10.mp4', gif: "10.gif" },
                { name: 'Case 2', mp4: "SlicerCapture46.mp4", gif: "46.gif" },
                { name: 'Case 3', mp4: "SlicerCapture49.mp4", gif: "49.gif" },
                { name: 'Case 4', mp4: "SlicerCapture50.mp4", gif: "50.gif" },
                { name: 'Case 5', mp4: "SlicerCapture70.mp4", gif: "70.gif" },
                { name: 'Case 6', mp4: "SlicerCapture81.mp4", gif: "81.gif" },
                { name: 'Case 7', mp4: "SlicerCapture123.mp4", gif: "123.gif" },
                { name: 'Case 8', mp4: "SlicerCapture138.mp4", gif: "138.gif" }
            ];
            // ===================================================================
            // ===================================================================

            const selectorContainer = document.getElementById('case-selector');
            const inputVideo = document.getElementById('input-mp4'); // Changed from inputGif
            const outputGif = document.getElementById('output-gif');

            if (selectorContainer) {
                caseData.forEach((caseInfo, index) => {
                    const button = document.createElement('button');
                    button.textContent = caseInfo.name;
                    button.classList.add('nav-link');
                    if (index === 0) button.classList.add('active');
                    button.addEventListener('click', () => {
                        loadCase(caseInfo); // Pass the whole object
                        selectorContainer.querySelectorAll('button').forEach(btn => btn.classList.remove('active'));
                        button.classList.add('active');
                    });
                    selectorContainer.appendChild(button);
                });

                // Modified function to load both MP4 and GIF
                function loadCase(caseInfo) {
                    if (inputVideo) {
                        inputVideo.src = caseInfo.mp4;
                        inputVideo.load(); // Tell the video element to load the new source
                    }
                    if (outputGif) {
                        outputGif.src = caseInfo.gif;
                    }
                }
                // Load the first case by default
                if (caseData.length > 0) {
                    loadCase(caseData[0]);
                }
            }

            // --- FAQ Accordion Logic ---
            document.querySelectorAll('.faq-header').forEach(header => {
                header.addEventListener('click', () => {
                    const content = header.nextElementSibling;
                    const icon = header.querySelector('svg');
                    const expanded = header.getAttribute('aria-expanded') === 'true';
                    header.setAttribute('aria-expanded', String(!expanded));
                    if (!expanded) {
                        content.hidden = false;
                        content.style.maxHeight = content.scrollHeight + 'px';
                    } else {
                        content.style.maxHeight = '0';
                        // hide after transition for a11y
                        setTimeout(() => { content.hidden = true; }, 500);
                    }
                    icon?.classList.toggle('rotate-180');
                });
            });

            // --- Chatbot Logic ---
            const fab = document.querySelector('.chatbot-fab');
            const windowEl = document.getElementById('chatbot-window');
            const closeBtn = windowEl?.querySelector('.close-btn');
            const sendBtn = windowEl?.querySelector('.send-btn');
            const inputEl = document.getElementById('chatbot-input');
            const messagesEl = document.getElementById('chatbot-messages');

            // --- New Generative AI Chatbot Logic ---

            // 1. System Prompt: This is the "brain" of the AI. It's fed all the info from the website.
            const systemPrompt = `
                You are the "Project Assistant" for a deep-learning framework for renal tumor classification.
                Your creators are Sarthak Vishal Luhadia, Daksh Singla, and Samayank Goel, guided by Dr. Logeswari G.
                Your tone should be helpful, knowledgeable, and professional.
                Answer questions based ONLY on the following context. Do not make up information. If a question is outside this context, politely state that you can only answer questions about this specific project.

                CONTEXT:
                - Project: A deep-learning framework for renal tumor detection and subtype classification.
                - Introduction: The diagnosis of Renal Cell Carcinoma (RCC) often depends on time-consuming, risky, and inconclusive CT scans and biopsies. Many AI models are "black boxes" and struggle to generalize.
                - Our Solution: A deep learning framework focused on CT imaging, incorporating explainable AI (XAI) to improve accuracy, robustness, and clinical trust.

                - The Problem (and Our Solutions):
                  1. Problem: Manual Effort (30-60 mins manual outlining). Solution: Automated ROI detection.
                  2. Problem: "Black Box" Models (Opaque decisions). Solution: Explainable AI heatmaps.
                  3. Problem: Poor Reproducibility (Single-center datasets). Solution: Using public datasets (KiTS, TCGA).

                - Comparison (Current vs. Our Framework):
                  - Manual (30-60 min) vs. Automated (2 min) analysis.
                  - Unexplained AI decisions vs. Visual AI explanations.
                  - CT-only, limited accuracy vs. Multi-modal accuracy boost.
                  - Single-center bias vs. Cross-validated results.

                - Framework Components (User can click hotspots for these):
                  - ct: Input is a raw 3D CT scan.
                  - yolo: YOLOv10s model detects and localizes kidneys to crop the Region of Interest (ROI).
                  - unet: A 3D U-Net segments every voxel as kidney or tumor, producing a precise volumetric segmentation.
                  - radiomics: Radiomic features (texture, shape, intensity) are extracted from the segmented tumor.
                  - fusion: Radiomic and genomic features are concatenated and fed to a Random Forest to predict the tumor subtype.
                  - xai: Explainable AI, specifically Grad-CAM, generates heatmaps to show what image regions influenced the decision.

                - Interactive Demo:
                  - Shows 8 real CT cases (as MP4/GIFs).
                  - Left side: Input (Raw CT Scan, MP4).
                  - Right side: Output (AI Processed, GIF) with segmentations for Tumor (red) and Kidney (blue).

                - Research Objectives:
                  - Clinical Impact: Reduce time-to-diagnosis.
                  - Robust Classification: Accurately subtype tumors.
                  - Accurate Segmentation: Precise 3D delineations (kidneys, tumors).
                  - Reproducibility: Use public datasets (KiTS, TCGA).
                  - Explainability: Provide visual insights (Grad-CAM).

                - Limitations & Future Work:
                  - Limitations: Dataset scarcity, small/ambiguous tumors, computationally heavy, needs prospective clinical validation.
                  - Future Work: Integrate multi-center cohorts, explore model optimization, refine segmentation, deeper fusion strategies.

                - FAQs:
                  - Goal: An automated, trustworthy AI pipeline.
                  - Why multi-modal?: CT shows 'where' and 'what'. Genomics reveals the 'why' (molecular identity), leading to better accuracy.
                  - What is XAI?: Tools like Grad-CAM make models transparent.
                  - Ready for hospitals?: Not yet. It’s a research framework, but a strong foundation.
            `;

            if (fab) fab.addEventListener('click', () => {
                windowEl.classList.toggle('hidden');
                if (!windowEl.classList.contains('hidden')) {
                    windowEl.classList.add('floating');
                } else {
                    windowEl.classList.remove('floating');
                }
            });
            if (closeBtn) closeBtn.addEventListener('click', () => {
                windowEl.classList.add('hidden');
                windowEl.classList.remove('floating');
            });

            // 2. Modified handleChat to be async
            async function handleChat() {
                const userInput = inputEl.value.trim();
                if (!userInput) return;

                addMessage(userInput, 'user');
                inputEl.value = '';

                // Add a "typing" indicator
                const typingMsg = addMessage('Bot is typing...', 'bot');
                typingMsg.classList.add('typing');

                try {
                    // 3. Get response from the generative AI
                    const botResponse = await getGenerativeResponse(userInput);
                    // 4. Replace typing message with the actual response
                    typingMsg.textContent = botResponse;
                    typingMsg.classList.remove('typing');
                } catch (error) {
                    console.error("Error getting generative response:", error);
                    typingMsg.textContent = 'Sorry, I seem to be having trouble connecting. Please try again later.';
                    typingMsg.classList.remove('typing');
                }
            }

            // Enable send button when input is not empty
            if (inputEl) {
                inputEl.addEventListener('input', () => {
                    if (sendBtn) sendBtn.disabled = inputEl.value.trim() === '';
                });
            }

            if (sendBtn) sendBtn.addEventListener('click', () => {
                if (inputEl.disabled) return; // Prevent multiple clicks
                inputEl.disabled = true;
                sendBtn.disabled = true;
                handleChat().finally(() => {
                    inputEl.disabled = false;
                    sendBtn.disabled = inputEl.value.trim() === ''; // Re-check disabled state
                    inputEl.focus();
                });
            });
            if (inputEl) inputEl.addEventListener('keypress', (e) => {
                if (e.key === 'Enter' && !inputEl.disabled && inputEl.value.trim() !== '') { // Prevent multiple clicks
                    inputEl.disabled = true;
                    if (sendBtn) sendBtn.disabled = true;
                    handleChat().finally(() => {
                        inputEl.disabled = false;
                        if (sendBtn) sendBtn.disabled = inputEl.value.trim() === ''; // Re-check disabled state
                        inputEl.focus();
                    });
                }
            });

            function addMessage(text, sender) {
                if (!messagesEl) return null;
                const msgEl = document.createElement('div');
                msgEl.classList.add('chat-message', sender === 'user' ? 'chat-user' : 'chat-bot');
                // Basic sanitization for text content
                msgEl.textContent = text;
                messagesEl.appendChild(msgEl);
                messagesEl.scrollTop = messagesEl.scrollHeight;
                return msgEl; // Return the element
            }

            // 4. New function to call the Gemini API
            async function getGenerativeResponse(userQuery) {
                const apiKey = "AIzaSyCqiKSaGwldDkOIymtbGy3jG1e2ybjxDTA"; // API key is handled by the environment
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;

                const payload = {
                    contents: [{
                        parts: [{ text: userQuery }]
                    }],
                    systemInstruction: {
                        parts: [{ text: systemPrompt }]
                    },
                };

                // Implement exponential backoff for retries
                let response;
                let delay = 1000;
                for (let i = 0; i < 3; i++) { // Retry up to 3 times
                    try {
                        response = await fetch(apiUrl, {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify(payload)
                        });

                        if (response.ok) {
                            const result = await response.json();
                            const candidate = result.candidates?.[0];
                            if (candidate && candidate.content?.parts?.[0]?.text) {
                                return candidate.content.parts[0].text;
                            } else {
                                // Handle cases where API returns OK but no content
                                if (result.promptFeedback && result.promptFeedback.blockReason) {
                                    console.warn(`Request blocked by API: ${result.promptFeedback.blockReason}`);
                                    return `I'm sorry, I can't respond to that. (Reason: ${result.promptFeedback.blockReason})`;
                                }
                                throw new Error('Invalid response structure from API');
                            }
                        } else if (response.status === 429 || response.status >= 500) {
                            // If throttled or server error, wait and retry
                            console.warn(`API request failed with status ${response.status}. Retrying in ${delay}ms...`);
                            await new Promise(resolve => setTimeout(resolve, delay));
                            delay *= 2;
                        } else {
                            // For other errors (e.g., 400 Bad Request), don't retry
                            const errorResult = await response.json().catch(() => ({})); // Try to parse error
                            console.error('API Error:', errorResult);
                            throw new Error(`API request failed with status ${response.status}`);
                        }
                    } catch (error) {
                        console.error(`Attempt ${i + 1} failed:`, error);
                        if (i === 2) { // Last attempt failed
                            throw error;
                        }
                        await new Promise(resolve => setTimeout(resolve, delay));
                        delay *= 2;
                    }
                }
                // Fallback error
                throw new Error('Failed to get a response from the AI after retries.');
            }

            // 5. Old generateBotResponse function is removed.

            // --- Scroll Animation Logic ---
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('is-visible');
                        observer.unobserve(entry.target);
                    }
                });
            }, { threshold: 0.1 });

            document.querySelectorAll('.animate-on-scroll').forEach(el => observer.observe(el));

            // --- Particle Effect ---
            function createParticles() {
                const particlesContainer = document.getElementById('particles');
                if (!particlesContainer) return;
                const particleCount = 20;

                for (let i = 0; i < particleCount; i++) {
                    const particle = document.createElement('div');
                    particle.className = 'particle';
                    particle.style.left = Math.random() * 100 + '%';
                    particle.style.animationDelay = Math.random() * 10 + 's';
                    particle.style.animationDuration = (Math.random() * 5 + 5) + 's';
                    particlesContainer.appendChild(particle);
                }
            }

            createParticles();

            // --- Optimized Scroll Animations ---
            const observerOptions = {
                threshold: 0.1,
                rootMargin: '0px 0px -10px 0px' // Trigger slightly before element enters viewport
            };

            // Single optimized observer for all animations
            const animationObserver = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        // Use requestAnimationFrame for smoother animations
                        requestAnimationFrame(() => {
                            entry.target.classList.add('is-visible');
                            animationObserver.unobserve(entry.target); // Unobserve after animation
                        });
                    }
                });
            }, observerOptions);

            // Observe all animated elements
            document.querySelectorAll('.animate-on-scroll').forEach(el => {
                animationObserver.observe(el);
            });

            // --- Optimized Scroll-Based Navigation Highlighting ---
            const navObserverOptions = {
                root: null,
                rootMargin: '-50% 0px -50% 0px',
                threshold: 0
            };

            const navObserver = new IntersectionObserver((entries) => {
                let currentSection = null;

                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        currentSection = entry.target.id.replace('page-', '');
                    }
                });

                if (currentSection) {
                    updateActiveNav(currentSection);
                }
            }, navObserverOptions);

            // Observe all sections for navigation highlighting
            document.querySelectorAll('.page-section').forEach(section => {
                navObserver.observe(section);
            });

            function updateActiveNav(activePage) {
                // Use more efficient DOM manipulation
                const activeLinks = document.querySelectorAll('.nav-link.active, .nav-link-mobile.active');
                activeLinks.forEach(link => link.classList.remove('active'));

                const newActiveLinks = document.querySelectorAll(`.nav-link[data-page="${activePage}"], .nav-link-mobile[data-page="${activePage}"]`);
                newActiveLinks.forEach(link => link.classList.add('active'));
            }

            // --- Smooth Scroll Enhancement ---
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();
                    const target = document.querySelector(this.getAttribute('href'));
                    if (target) {
                        target.scrollIntoView({
                            behavior: 'smooth',
                            block: 'start'
                        });
                    }
                });
            });

            // --- Optimized Scroll Effects ---
            let lastScrollY = window.scrollY;
            let ticking = false;
            const header = document.querySelector('header');

            // Use passive scroll listener for better performance
            window.addEventListener('scroll', () => {
                if (!ticking) {
                    requestAnimationFrame(() => {
                        const currentScrollY = window.scrollY;

                        // Header hide/show on scroll with throttling
                        if (currentScrollY > lastScrollY && currentScrollY > 100) {
                           if(header) header.style.transform = 'translateY(-100%)';
                        } else {
                           if(header) header.style.transform = 'translateY(0)';
                        }

                        lastScrollY = currentScrollY;
                        ticking = false;
                    });
                    ticking = true;
                }
            }, { passive: true }); // Passive listener for better performance
        });
    </script>
</body>

</html>